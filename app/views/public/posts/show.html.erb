<div class="container">
  
  <div class ="row">
    <div class="col-11 offset-1">
      <h2>コメントページ</h2>
    </div>
  </div>
  
  <hr>
  
  <div class ="row">
    <div class="col-7 offset-2">
      <%= @player.player_image.html_safe %>
    </div>
  </div>
  
  <hr>
  
  <div class="row">
    <div class="col-12">
      <span><%= @post.id %>:</span>
      <span class="text-success"><%= @post.user.user_name %></span>
      <span class="text-muted">対戦相手:<%= @post.team.team_name %></span>
      <span class="text-muted">対戦日:<%= @post.game_date %></span>
      <span class="text-muted">スタジアム:<%= @post.stadium_i18n %></span>
        <% if @post.favorited_by?(current_user) %>
      <span>
        <%= link_to player_post_favorite_path(@player.id, @post.id), method: :delete do %>
          ♥<%= @post.favorites.count %> いいね
        <% end %>
      </span>
        <% else %>
      <span>
        <%= link_to player_post_favorites_path(@player.id, @post.id), method: :post do %>
          ♡<%= @post.favorites.count %> いいね
        <% end %>
      </span>
        <% end %>
    </div>
  </div>
  
  <div class="row pt-4">
    <div class="col-8 offset-1">
      レビュー内容: <span class="font-weight-bold"><%= @post.contents %></span>
    </div>
    <div class="col-3">
      <% if @post.user == current_user %>
        <%= link_to "削除", player_post_path(@player.id,@post.id), method: :delete, "data-confirm" => "本当にこの投稿を削除しますか？" %>
      <% end %>
    </div>
  </div>
  
  <hr>
  
  <div class="row">
    <h5 class="col-8">
      コメント一覧
    </h5>
  </div>
  
  <hr>
  
  <% @post.comments.each do |comment| %>
    <div class="row pt-4">
      <div class="col-10 offset-1">
        <span class="text-success"><%= comment.user.user_name %></span>
        <span class="text-muted"><%= comment.created_at.strftime('%Y/%m/%d') %></span>
      </div>
    </div>
    <div class="row pt-2 pb-4">
      <div class="col-8 offset-2">
        コメント内容: 
          <span class="font-weight-bold"><%= comment.comment_contents %></span>
          <span>
            <% if comment.user == current_user %>
              <%= link_to "削除", player_post_comment_path(@player,@post,comment), method: :delete, "data-confirm" => "本当にこのコメントを削除しますか？" %>
            <% end %>
          </span>
      </div>
    </div>
  <% end %>
  
  <hr>
  
  <%= form_with model: ([@player, @post, @comment]) do |f| %>
    <div class="row pt-5">
      <div class="col-12">
        <%= f.text_area :comment_contents, rows: '7', placeholder: "コメントを入力", class: "form-control" %>
      </div>
    </div>
    <div class="row py-4">
      <div class="col-12 text-center">
        <%= f.submit "送信する", class: "btn btn-primary" %>
      </div>
    </div>
  <% end %>
  
  <hr>
  
  <div class="row py-3">
    <div class="col-12 text-center">
      <%= link_to "この選手のスレッド一覧へ戻る", player_posts_path(@player.id), class: "btn btn-secondary" %>
    </div>
  </div>
  <div class="row py-3">
    <div class="col-12 text-center">
      <%= link_to "選手一覧へ戻る", players_path, class: "btn btn-secondary" %>
    </div>
  </div>

</div>